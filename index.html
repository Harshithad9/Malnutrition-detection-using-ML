<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriScan - Intelligent Malnutrition Detection</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-navy: #2c3e50;
            --primary-cyan: #17a2b8;
            --accent-orange: #ff6b35;
            --success-green: #27ae60;
            --warning-red: #e74c3c;
            --light-bg: #f0f7fb;
            --light-gray: #ecf0f1;
            --white: #ffffff;
            --dark-text: #2c3e50;
            --secondary-teal: #16a085;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--light-bg);
            color: var(--dark-text);
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* SIDEBAR STYLING */
        .sidebar {
            width: 260px;
            background: var(--primary-navy);
            color: var(--white);
            padding: 40px 20px;
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            left: 0;
            top: 0;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar-logo span {
            display: block;
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 16px 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            font-weight: 500;
        }

        .sidebar-item:hover,
        .sidebar-item.active {
            background: var(--primary-cyan);
            color: var(--white);
            transform: translateX(5px);
        }

        .sidebar-item-icon {
            font-size: 22px;
        }

        .sidebar-footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.5;
        }

        /* MAIN CONTENT */
        .main-content {
            flex: 1;
            margin-left: 260px;
            overflow-y: auto;
        }

        .sections-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .section {
            display: none;
            padding: 50px 60px;
            min-height: 100vh;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* HERO SECTION */
        .hero {
            background: linear-gradient(135deg, #17a2b8 0%, #16a085 100%);
            color: var(--white);
            padding: 60px 40px;
            border-radius: 12px;
            margin-bottom: 40px;
            text-align: center;
        }

        .hero-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            color: var(--white);
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .hero h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto 30px;
            opacity: 0.95;
        }

        .hero-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* STATS GRID */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin-top: 40px;
        }

        .stat-card {
            background: var(--white);
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .stat-number {
            font-size: 36px;
            font-weight: 700;
            color: var(--primary-cyan);
            margin-bottom: 10px;
        }

        .stat-number.orange {
            color: var(--accent-orange);
        }

        .stat-label {
            font-size: 14px;
            color: #7f8c8d;
            font-weight: 600;
        }

        /* BUTTONS */
        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-cyan);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--secondary-teal);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(23, 162, 184, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--white);
            border: 2px solid var(--white);
        }

        .btn-secondary:hover {
            background: var(--white);
            color: var(--primary-cyan);
        }

        /* UPLOAD SECTION */
        .upload-container {
            background: var(--white);
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .upload-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .upload-left h2 {
            font-size: 24px;
            margin-bottom: 16px;
            color: var(--primary-navy);
        }

        .upload-left p {
            margin-bottom: 12px;
            color: #555;
        }

        .upload-right {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .upload-area {
            border: 2px dashed var(--primary-cyan);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            background: rgba(23, 162, 184, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: var(--secondary-teal);
            background: rgba(23, 162, 184, 0.1);
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .upload-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-navy);
            margin-bottom: 8px;
        }

        .upload-subtext {
            font-size: 14px;
            color: #7f8c8d;
        }

        #imageInput {
            display: none;
        }

        .image-preview {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            background: #f9f9f9;
        }

        .image-preview img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
        }

        .remove-image {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.6);
            color: var(--white);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .remove-image:hover {
            background: rgba(0, 0, 0, 0.8);
        }

        .analyze-btn {
            background: var(--accent-orange);
            color: var(--white);
            border: none;
            padding: 14px 30px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .analyze-btn:hover {
            background: #ff5722;
            transform: translateY(-2px);
        }

        /* IMAGE GUIDELINES */
        .guidelines-container {
            background: var(--white);
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .guidelines-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-navy);
            margin-bottom: 30px;
            text-align: center;
        }

        .guidelines-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }

        .guideline-card {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }

        .guideline-card:hover {
            transform: translateY(-5px);
        }

        .guideline-header {
            padding: 20px;
            text-align: center;
            font-weight: 700;
            font-size: 18px;
            color: var(--white);
        }

        .guideline-header.accepted {
            background: var(--success-green);
        }

        .guideline-header.rejected {
            background: var(--warning-red);
        }

        .guideline-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .guideline-content {
            padding: 20px;
            background: var(--white);
        }

        .guideline-content h4 {
            font-size: 16px;
            margin-bottom: 12px;
            color: var(--primary-navy);
        }

        .guideline-content ul {
            list-style: none;
            font-size: 14px;
            color: #555;
        }

        .guideline-content li {
            padding: 6px 0;
            padding-left: 24px;
            position: relative;
        }

        .guideline-content li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--success-green);
            font-weight: bold;
        }

        .guideline-content.rejected li:before {
            content: "‚úï";
            color: var(--warning-red);
        }

        /* RESULTS PANEL */
        .results-panel {
            background: var(--white);
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .results-panel h2 {
            font-size: 28px;
            margin-bottom: 30px;
            color: var(--primary-navy);
        }

        .result-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .result-badge.healthy {
            background: rgba(39, 174, 96, 0.2);
            color: var(--success-green);
        }

        .result-badge.malnourished {
            background: rgba(255, 107, 53, 0.2);
            color: var(--accent-orange);
        }

        .classification {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
            background: var(--light-bg);
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .classification-icon {
            font-size: 40px;
        }

        .classification-text h3 {
            font-size: 22px;
            margin-bottom: 4px;
            color: var(--primary-navy);
        }

        .classification-text p {
            font-size: 14px;
            color: #7f8c8d;
        }

        .confidence-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .confidence-item,
        .severity-item {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 8px;
        }

        .confidence-label,
        .severity-label {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 8px;
        }

        .confidence-value,
        .severity-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-cyan);
        }

        .severity-value.none {
            color: var(--success-green);
        }

        .severity-value.moderate {
            color: var(--accent-orange);
        }

        .severity-value.severe {
            color: var(--warning-red);
        }

        /* ASSESSMENT FORM */
        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-navy);
        }

        .required {
            color: var(--warning-red);
        }

        .form-group input,
        .form-group select {
            padding: 12px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            font-size: 14px;
            transition: border 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-cyan);
            box-shadow: 0 0 0 3px rgba(23, 162, 184, 0.1);
        }

        /* KEY FINDINGS */
        .key-findings {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid var(--light-gray);
        }

        .key-findings h3 {
            font-size: 18px;
            margin-bottom: 16px;
            color: var(--primary-navy);
        }

        .findings-list {
            list-style: none;
        }

        .findings-list li {
            padding: 12px;
            margin-bottom: 8px;
            background: var(--light-bg);
            border-left: 4px solid var(--primary-cyan);
            border-radius: 4px;
            display: flex;
            gap: 12px;
        }

        .findings-list li:before {
            content: "‚Üí";
            font-weight: bold;
            color: var(--primary-cyan);
            flex-shrink: 0;
        }

        /* ASSESSMENT GRID */
        .assessment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .assessment-item {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid var(--primary-cyan);
        }

        .assessment-item-label {
            font-size: 13px;
            color: #7f8c8d;
            margin-bottom: 8px;
        }

        .assessment-item-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-navy);
        }

        .download-btn {
            width: 100%;
            padding: 16px;
            background: var(--accent-orange);
            color: var(--white);
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .download-btn:hover {
            background: #ff5722;
            transform: translateY(-2px);
        }

        /* INFO SECTION */
        .info-section {
            background: var(--white);
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .info-section h2 {
            font-size: 32px;
            margin-bottom: 30px;
            color: var(--primary-navy);
        }

        .info-section h3 {
            font-size: 20px;
            margin: 24px 0 16px;
            color: var(--primary-navy);
        }

        .info-section p {
            margin-bottom: 16px;
            color: #555;
            line-height: 1.8;
        }

        .info-section ul {
            margin-left: 20px;
            margin-bottom: 16px;
        }

        .info-section li {
            margin-bottom: 8px;
            color: #555;
        }

        /* MISSION & TEAM FLEXBOX */
        .mission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin: 30px 0;
        }

        .mission-card {
            background: linear-gradient(135deg, #17a2b8 0%, #16a085 100%);
            color: var(--white);
            padding: 30px;
            border-radius: 12px;
            transition: transform 0.3s ease;
        }

        .mission-card:hover {
            transform: translateY(-5px);
        }

        .mission-card-emoji {
            font-size: 40px;
            margin-bottom: 16px;
        }

        .mission-card h4 {
            font-size: 18px;
            margin-bottom: 12px;
        }

        .mission-card p {
            font-size: 14px;
            opacity: 0.95;
        }

        /* MALNUTRITION TYPES FLEXBOX */
        .malnutrition-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin: 30px 0;
        }

        .malnutrition-type {
            background: var(--light-bg);
            border-left: 4px solid var(--primary-cyan);
            padding: 24px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .malnutrition-type:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateX(5px);
        }

        .malnutrition-type h4 {
            font-size: 18px;
            margin-bottom: 12px;
            color: var(--primary-navy);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .malnutrition-type p {
            font-size: 14px;
            color: #555;
            margin-bottom: 12px;
        }

        .malnutrition-type ul {
            list-style: none;
            font-size: 13px;
        }

        .malnutrition-type li {
            padding: 6px 0;
            color: #555;
        }

        .malnutrition-type li:before {
            content: "‚Üí ";
            color: var(--primary-cyan);
            font-weight: bold;
            margin-right: 8px;
        }

        /* DATA VISUALIZATION */
        .chart-container {
            background: var(--white);
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: relative;
            height: 400px;
        }

        .chart-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary-navy);
            text-align: center;
        }

        /* CHATBOT */
        .chatbot-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-cyan);
            color: var(--white);
            border: none;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(23, 162, 184, 0.4);
            transition: all 0.3s ease;
            z-index: 999;
        }

        .chatbot-button:hover {
            background: var(--secondary-teal);
            transform: scale(1.1);
        }

        .chatbot-modal {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 380px;
            height: 500px;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            z-index: 998;
            overflow: hidden;
        }

        .chatbot-modal.active {
            display: flex;
        }

        .chatbot-header {
            background: var(--primary-cyan);
            color: var(--white);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h3 {
            font-size: 18px;
            margin: 0;
        }

        .chatbot-close {
            background: none;
            border: none;
            color: var(--white);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chatbot-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: var(--light-bg);
        }

        .message {
            display: flex;
            margin-bottom: 16px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.bot {
            justify-content: flex-start;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            line-height: 1.5;
        }

        .message.bot .message-content {
            background: var(--white);
            color: var(--dark-text);
            border: 1px solid var(--light-gray);
        }

        .message.user .message-content {
            background: var(--primary-cyan);
            color: var(--white);
        }

        .chatbot-input {
            display: flex;
            gap: 8px;
            padding: 16px;
            background: var(--white);
            border-top: 1px solid var(--light-gray);
        }

        .chatbot-input input {
            flex: 1;
            padding: 10px 14px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            font-size: 14px;
            transition: border 0.3s ease;
        }

        .chatbot-input input:focus {
            outline: none;
            border-color: var(--primary-cyan);
        }

        .chatbot-input button {
            background: var(--primary-cyan);
            color: var(--white);
            border: none;
            border-radius: 6px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .chatbot-input button:hover {
            background: var(--secondary-teal);
        }

        /* FOOTER */
        .footer {
            background: var(--primary-navy);
            color: var(--white);
            padding: 30px 60px;
            text-align: center;
            font-size: 14px;
            margin-left: 260px;
        }

        .footer p {
            opacity: 0.8;
        }

        .loading {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid var(--white);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
                padding: 20px 10px;
            }

            .main-content {
                margin-left: 200px;
            }

            .section {
                padding: 30px 20px;
            }

            .footer {
                margin-left: 200px;
                padding: 20px;
            }

            .upload-section,
            .guidelines-grid,
            .stats-grid,
            .mission-grid,
            .malnutrition-types {
                grid-template-columns: 1fr;
            }

            .hero h1 {
                font-size: 36px;
            }

            .chatbot-modal {
                width: calc(100% - 40px);
                right: 20px;
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                <span>NutriScan</span>
            </div>
            <ul class="sidebar-nav">
                <li class="sidebar-item active" onclick="showSection('home')">
                    <span class="sidebar-item-icon">üè†</span>
                    <span>Home</span>
                </li>
                <li class="sidebar-item" onclick="showSection('try-it')">
                    <span class="sidebar-item-icon">üì§</span>
                    <span>Try It Out</span>
                </li>
                <li class="sidebar-item" onclick="showSection('mission')">
                    <span class="sidebar-item-icon">üë•</span>
                    <span>Mission & Team</span>
                </li>
                <li class="sidebar-item" onclick="showSection('manual')">
                    <span class="sidebar-item-icon">üìñ</span>
                    <span>User Manual</span>
                </li>
                <li class="sidebar-item" onclick="showSection('about')">
                    <span class="sidebar-item-icon">‚ÑπÔ∏è</span>
                    <span>About</span>
                </li>
            </ul>
            <div class="sidebar-footer">
                <p>Professional Malnutrition Analysis System</p>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="sections-container">
                <!-- HOME SECTION -->
                <section class="section active" id="home">
                    <div class="hero">
                        <span class="hero-badge">üöÄ Advanced Healthcare Technology</span>
                        <h1>Intelligent Detection</h1>
                        <p>Harness the power of AI to detect nutritional deficiencies early with over 90% accuracy. Support millions globally through intelligent analysis and actionable insights.</p>
                        <div class="hero-buttons">
                            <button class="btn btn-primary" onclick="showSection('try-it')">Try Analysis Now</button>
                            <button class="btn btn-secondary" onclick="showSection('mission')">Learn More</button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">90%</div>
                            <div class="stat-label">AI Accuracy Rate</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">30s</div>
                            <div class="stat-label">Analysis Time</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-number">üåç</div>
                            <div class="stat-label">Global Impact</div>
                        </div>
                    </div>
                </section>

                <!-- TRY IT OUT SECTION -->
                <section class="section" id="try-it">
                    <!-- Added image guidelines container before upload -->
                    <div class="guidelines-container" id="guidelinesPanel">
                        <h2 class="guidelines-title">üì∏ Image Guidelines</h2>
                        <p style="text-align: center; margin-bottom: 30px; color: #555;">Please ensure your image meets these standards for accurate analysis</p>
                        
                        <div class="guidelines-grid">
                            <div class="guideline-card">
                                <div class="guideline-header accepted">‚úì ACCEPTED IMAGES</div>
                                <img src="C:\Users\rakshith\malnutrition_detection_using_ml\streamlit_app\assests\images\accepted1.png" alt="Accepted Image Example" class="guideline-image">
                                <div class="guideline-content">
                                    <h4>Good Image Quality</h4>
                                    <ul>
                                        <li>Clear, well-lit photo</li>
                                        <li>Face visible & frontal view</li>
                                        <li>No glasses or obstructions</li>
                                        <li>Natural lighting preferred</li>
                                        <li>Child's body visible</li>
                                        <li>Recent photo (clear quality)</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="guideline-card">
                                <div class="guideline-header rejected">‚úï REJECTED IMAGES</div>
                                <img src="C:\Users\rakshith\malnutrition_detection_using_ml\streamlit_app\assests\images\rejected2.png" alt="Rejected Image Example" class="guideline-image">
                                <div class="guideline-content rejected">
                                    <h4>Avoid These Issues</h4>
                                    <ul>
                                        <li>Blurry or unclear images</li>
                                        <li>Poor lighting/too dark</li>
                                        <li>Face covered or obscured</li>
                                        <li>Side profile only</li>
                                        <li>Multiple people in frame</li>
                                        <li>Filters or heavy editing</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="upload-container">
                        <div class="upload-section">
                            <div class="upload-left">
                                <h2>üì§ Upload Child Image</h2>
                                <p>Upload a clear photo of the child for initial assessment. Our AI model will analyze the image to determine if the child shows signs of malnutrition or appears healthy.</p>
                                <p><strong>Tips:</strong> Ensure good lighting, clear visibility of the child's face and body, and remove any obstructing objects for best results.</p>
                            </div>
                            <div class="upload-right">
                                <div id="imageContainer">
                                    <div class="upload-area" id="uploadArea">
                                        <div class="upload-icon">üì∑</div>
                                        <p class="upload-text">Click or drag image here</p>
                                        <p class="upload-subtext">JPG, PNG - Max 5MB</p>
                                    </div>
                                    <input type="file" id="imageInput" accept="image/*">
                                </div>
                                <div id="previewContainer" style="display: none;">
                                    <div class="image-preview">
                                        <img id="previewImage" src="/placeholder.svg" alt="Preview">
                                        <button class="remove-image" onclick="removeImage()">‚úï</button>
                                    </div>
                                    <button class="analyze-btn" onclick="analyzeImage()">
                                        <span class="loading" id="analyzeLoader" style="display: none;"></span>
                                        Analyze Image
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RESULTS PANEL -->
                    <div id="resultsPanel" style="display: none;">
                        <div class="results-panel">
                            <h2>‚ú® Analysis Results</h2>
                            <span class="result-badge" id="resultBadge"></span>
                            <div class="classification" id="classification"></div>

                            <div class="confidence-row">
                                <div class="confidence-item">
                                    <div class="confidence-label">Confidence Level</div>
                                    <div class="confidence-value" id="confidence"></div>
                                </div>
                                <div class="severity-item">
                                    <div class="severity-label">Severity Status</div>
                                    <div class="severity-value" id="severity"></div>
                                </div>
                            </div>

                            <!-- CHILD DETAILS FORM -->
                            <div id="assessmentForm" style="display: none; margin-top: 30px; padding-top: 30px; border-top: 1px solid var(--light-gray);">
                                <h3 style="font-size: 18px; font-weight: 700; color: var(--primary-navy); margin-bottom: 20px;">üìã Step 2: Enter Child Details</h3>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                                    <div class="form-group">
                                        <label class="form-label">Age (years) <span class="required">*</span></label>
                                        <input type="number" id="age" placeholder="e.g., 5" min="0" max="18">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Gender <span class="required">*</span></label>
                                        <select id="gender">
                                            <option value="">Select Gender</option>
                                            <option value="male">üë¶ Male</option>
                                            <option value="female">üëß Female</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Height (cm) <span class="required">*</span></label>
                                        <input type="number" id="height" placeholder="e.g., 120" min="0" max="200">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Weight (kg) <span class="required">*</span></label>
                                        <input type="number" id="weight" placeholder="e.g., 25.5" min="0" step="0.1">
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="performAssessment()" style="width: 100%; margin-top: 20px;">
                                    <span class="loading" id="assessmentLoader" style="display: none;"></span>
                                    Generate Assessment
                                </button>
                            </div>

                            <!-- KEY FINDINGS -->
                            <div class="key-findings" id="keyFindings" style="display: none;">
                                <h3>üîç Key Findings</h3>
                                <ul class="findings-list" id="findingsList"></ul>
                            </div>

                            <!-- ASSESSMENT RESULTS -->
                            <div id="assessmentResults" style="display: none; margin-top: 30px;">
                                <h3 style="font-size: 18px; font-weight: 700; color: var(--primary-navy); margin-bottom: 20px;">üìä Assessment Findings</h3>
                                <div class="assessment-grid" id="assessmentGrid"></div>

                                <button class="download-btn" onclick="downloadReport()">üì• Download Report (PDF)</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MISSION SECTION -->
                <section class="section" id="mission">
                    <div class="info-section">
                        <h2>üéØ Our Mission & Team</h2>

                        <div class="mission-grid">
                            <div class="mission-card">
                                <div class="mission-card-emoji">üè•</div>
                                <h4>Our Mission</h4>
                                <p>Transforming global healthcare through intelligent technology. We believe every person deserves access to accurate, timely nutrition assessment.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üåç</div>
                                <h4>Global Impact</h4>
                                <p>Working to reach populations affected by malnutrition across 45+ countries with a commitment to zero hunger.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üöÄ</div>
                                <h4>Innovation</h4>
                                <p>Continuously advancing our technology to stay at the forefront of healthcare AI with 94.8% detection accuracy.</p>
                            </div>
                        </div>

                        <h3 style="margin-top: 40px;">üí° Core Values</h3>
                        <div class="mission-grid">
                            <div class="mission-card">
                                <div class="mission-card-emoji">üéØ</div>
                                <h4>Accuracy</h4>
                                <p>Maintaining the highest standards of clinical accuracy and validation in every analysis.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">‚öñÔ∏è</div>
                                <h4>Equity</h4>
                                <p>Eliminating healthcare disparities and reaching underserved populations globally.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">ü§ù</div>
                                <h4>Collaboration</h4>
                                <p>Partnering with healthcare institutions, NGOs, and communities to drive impact.</p>
                            </div>
                        </div>

                        <h3 style="margin-top: 40px;">üìà Our Impact</h3>
                        <div class="mission-grid">
                            <div class="mission-card">
                                <div class="mission-card-emoji">‚úÖ</div>
                                <h4>94.8% Accuracy</h4>
                                <p>Advanced AI models trained on thousands of clinical cases and medical images.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">‚è∞</div>
                                <h4>24/7 Available</h4>
                                <p>Continuous support for healthcare professionals worldwide, any time of day.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üèÜ</div>
                                <h4>Award Winning</h4>
                                <p>Recognized globally for innovation in healthcare technology and research.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MANUAL SECTION -->
                <section class="section" id="manual">
                    <div class="info-section">
                        <h2>üìö User Manual & FAQ</h2>

                        <h3>üöÄ Getting Started</h3>
                        <p>NutriAnalyze is designed to be simple and intuitive. Follow these steps to assess a child's nutritional status:</p>

                        <div class="mission-grid">
                            <div class="mission-card">
                                <div class="mission-card-emoji">üì∏</div>
                                <h4>Step 1: Upload Image</h4>
                                <p>Capture or upload a clear photo of the child. Ensure good lighting and visibility of face and body.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">ü§ñ</div>
                                <h4>Step 2: AI Analysis</h4>
                                <p>Our AI analyzes the image in real-time. If "Healthy", the assessment ends here.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üìã</div>
                                <h4>Step 3: Enter Details</h4>
                                <p>If malnutrition detected, provide age, gender, height, and weight for detailed assessment.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üìä</div>
                                <h4>Step 4: Get Results</h4>
                                <p>Receive comprehensive findings: Stunted, Wasted, Overweight, or Underweight status.</p>
                            </div>
                        </div>

                        <h3 style="margin-top: 40px;">‚ùì Frequently Asked Questions</h3>

                        <div class="mission-grid">
                            <div class="mission-card">
                                <div class="mission-card-emoji">‚ùì</div>
                                <h4>How accurate is NutriAnalyze?</h4>
                                <p>Our AI model has 94.8% accuracy, trained on thousands of clinical cases and validated by healthcare professionals.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üñºÔ∏è</div>
                                <h4>What image quality is needed?</h4>
                                <p>Clear, well-lit photos with visible face and body. Refer to the image guidelines in "Try It Out" section for details.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üëß</div>
                                <h4>What age group can be assessed?</h4>
                                <p>NutriAnalyze is optimized for children aged 0-18 years. Adults can be assessed but with different standards.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üì•</div>
                                <h4>Can I download reports?</h4>
                                <p>Yes! After assessment, you can download a detailed PDF report with findings and recommendations.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üîí</div>
                                <h4>Is data secure?</h4>
                                <p>All data is encrypted and secure. We comply with HIPAA and international healthcare data standards.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üåê</div>
                                <h4>Works offline?</h4>
                                <p>Internet connection required for AI analysis, but reports can be saved for offline use.</p>
                            </div>
                        </div>

                        <h3 style="margin-top: 40px;">üí™ Tips for Best Results</h3>
                        <ul style="list-style: none; margin-left: 0;">
                            <li>‚úÖ Use natural daylight for better image quality</li>
                            <li>‚úÖ Take photos from a distance showing full body</li>
                            <li>‚úÖ Ensure child is looking directly at camera</li>
                            <li>‚úÖ Remove glasses, hats, or face-covering items</li>
                            <li>‚úÖ Use recent photos for accurate assessment</li>
                            <li>‚úÖ Enter accurate height and weight measurements</li>
                        </ul>
                    </div>
                </section>

                <!-- ABOUT SECTION -->
                <section class="section" id="about">
                    <div class="info-section">
                        <h2>‚ÑπÔ∏è Understanding Malnutrition</h2>
                        <p style="font-size: 16px; color: #555;">A comprehensive analysis of malnutrition globally and the role of AI in early detection.</p>

                        <h3 style="margin-top: 40px;">üìä Global Malnutrition Data</h3>
                        <div class="mission-grid">
                            <div class="mission-card">
                                <div class="mission-card-emoji">üåç</div>
                                <h4>828M People</h4>
                                <p>Suffering from hunger annually worldwide</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üë∂</div>
                                <h4>149M Children</h4>
                                <p>With stunting worldwide (chronic malnutrition)</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üéØ</div>
                                <h4>94.8% Accuracy</h4>
                                <p>Our AI model in early detection</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üåê</div>
                                <h4>45+ Countries</h4>
                                <p>Using our platform for detection</p>
                            </div>
                        </div>

                        <!-- Data Visualization Chart -->
                        <h3 style="margin-top: 40px;">üìà Malnutrition Types Distribution</h3>
                        <div class="chart-container">
                            <canvas id="malnutritionChart"></canvas>
                        </div>

                        <h3 style="margin-top: 40px;">üçΩÔ∏è What is Malnutrition?</h3>
                        <p>Malnutrition occurs when a person's diet lacks appropriate calories, proteins, and other essential nutrients, or when certain health conditions prevent the body from absorbing nutrients properly. It affects growth, development, immunity, and overall health, particularly in children under 5 years.</p>

                        <h3 style="margin-top: 40px;">üìã Types of Malnutrition</h3>
                        <div class="malnutrition-types">
                            <div class="malnutrition-type">
                                <h4>üèÉ Protein-Energy Malnutrition</h4>
                                <p>Results from inadequate intake of protein and/or energy, leading to weight loss, muscle wasting, and impaired growth.</p>
                                <ul>
                                    <li>Stunting (chronic malnutrition)</li>
                                    <li>Wasting (acute malnutrition)</li>
                                    <li>Underweight conditions</li>
                                </ul>
                            </div>

                            <div class="malnutrition-type">
                                <h4>‚öóÔ∏è Micronutrient Deficiency</h4>
                                <p>Lacks essential vitamins and minerals needed for proper body function and development.</p>
                                <ul>
                                    <li>Iron deficiency anemia</li>
                                    <li>Vitamin A deficiency</li>
                                    <li>Iodine and zinc deficiencies</li>
                                </ul>
                            </div>

                            <div class="malnutrition-type">
                                <h4>‚öñÔ∏è Overnutrition</h4>
                                <p>Excessive caloric intake leading to obesity and related health complications.</p>
                                <ul>
                                    <li>Childhood obesity</li>
                                    <li>Overweight conditions</li>
                                    <li>Metabolic disorders</li>
                                </ul>
                            </div>
                        </div>

                        <h3 style="margin-top: 40px;">‚ö†Ô∏è Symptoms & Signs of Malnutrition</h3>
                        <div class="malnutrition-types">
                            <div class="malnutrition-type">
                                <h4>üî¥ Acute Symptoms</h4>
                                <ul>
                                    <li>Visible weight loss</li>
                                    <li>Muscle wasting</li>
                                    <li>Dry skin</li>
                                    <li>Weak immunity</li>
                                    <li>Frequent infections</li>
                                </ul>
                            </div>

                            <div class="malnutrition-type">
                                <h4>üî∂ Chronic Symptoms</h4>
                                <ul>
                                    <li>Poor growth & stunting</li>
                                    <li>Delayed development</li>
                                    <li>Weak bones</li>
                                    <li>Pale appearance</li>
                                    <li>Fatigue</li>
                                </ul>
                            </div>

                            <div class="malnutrition-type">
                                <h4>üîµ Long-term Effects</h4>
                                <ul>
                                    <li>Impaired cognitive development</li>
                                    <li>Compromised immunity</li>
                                    <li>Chronic health issues</li>
                                    <li>Reduced productivity</li>
                                    <li>Economic impact</li>
                                </ul>
                            </div>
                        </div>

                        <h3 style="margin-top: 40px;">‚úÖ Prevention & Management</h3>
                        <div class="mission-grid">
                            <div class="mission-card">
                                <div class="mission-card-emoji">üçé</div>
                                <h4>Balanced Diet</h4>
                                <p>Ensure intake of proteins, carbs, fats, vitamins & minerals for optimal health.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üèÉ</div>
                                <h4>Physical Activity</h4>
                                <p>Regular exercise supports healthy growth and development in children.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">ü©∫</div>
                                <h4>Regular Checkups</h4>
                                <p>Monitor child's growth and nutrition with healthcare professionals.</p>
                            </div>
                            <div class="mission-card">
                                <div class="mission-card-emoji">üéì</div>
                                <h4>Health Education</h4>
                                <p>Learn about nutrition and make informed dietary choices for family.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- FOOTER -->
                <footer class="footer">
                    <p>¬© 2025 NutriAnalyze. All rights reserved.</p>
                </footer>
            </div>
        </div>
    </div>

    <!-- CHATBOT -->
    <button class="chatbot-button" onclick="toggleChatbot()">üí¨</button>
    <div class="chatbot-modal" id="chatbotModal">
        <div class="chatbot-header">
            <h3>üí¨ NutriAssist</h3>
            <button class="chatbot-close" onclick="toggleChatbot()">‚úï</button>
        </div>
        <div class="chatbot-messages" id="chatMessages"></div>
        <div class="chatbot-input">
            <input type="text" id="chatInput" placeholder="Ask a question..." onkeypress="handleChatKeypress(event)">
            <button onclick="sendChatMessage()">‚û§</button>
        </div>
    </div>

    <script>
        let currentChart = null;

        // Initialize chatbot with greeting
        function initChatbot() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '<div class="message bot"><div class="message-content">üëã Hi! I\'m NutriAssist. I can help you with:<br>‚úì How to use the app<br>‚úì About malnutrition types<br>‚úì Our mission<br>‚úì Health recommendations<br>What would you like to know?</div></div>';
        }

        // Show section
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');

            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.sidebar-item').classList.add('active');

            // Initialize chart for about section
            if (sectionId === 'about') {
                setTimeout(() => {
                    initMalnutritionChart();
                }, 100);
            }
        }

        // Image upload handlers
        const uploadArea = document.getElementById('uploadArea');
        const imageInput = document.getElementById('imageInput');
        const previewContainer = document.getElementById('previewContainer');
        const previewImage = document.getElementById('previewImage');

        uploadArea.addEventListener('click', () => imageInput.click());
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = 'var(--secondary-teal)';
            uploadArea.style.background = 'rgba(23, 162, 184, 0.15)';
        });
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = 'var(--primary-cyan)';
            uploadArea.style.background = 'rgba(23, 162, 184, 0.05)';
        });
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            const files = e.dataTransfer.files;
            if (files.length > 0) handleImageUpload(files[0]);
        });

        imageInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) handleImageUpload(e.target.files[0]);
        });

        function handleImageUpload(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                previewImage.src = e.target.result;
                document.getElementById('imageContainer').style.display = 'none';
                previewContainer.style.display = 'flex';
                previewContainer.style.flexDirection = 'column';
                document.getElementById('resultsPanel').style.display = 'none';
            };
            reader.readAsDataURL(file);
        }

        function removeImage() {
            imageInput.value = '';
            document.getElementById('imageContainer').style.display = 'block';
            previewContainer.style.display = 'none';
            document.getElementById('resultsPanel').style.display = 'none';
        }

        function analyzeImage() {
            const loader = document.getElementById('analyzeLoader');
            loader.style.display = 'inline-block';

            setTimeout(() => {
                loader.style.display = 'none';
                const isHealthy = Math.random() > 0.4;
                
                document.getElementById('resultsPanel').style.display = 'block';
                
                if (isHealthy) {
                    document.getElementById('resultBadge').className = 'result-badge healthy';
                    document.getElementById('resultBadge').textContent = '‚úì Healthy';
                    document.getElementById('classification').innerHTML = `
                        <div class="classification-icon">üòä</div>
                        <div class="classification-text">
                            <h3>Healthy Status</h3>
                            <p>The child shows no visible signs of malnutrition</p>
                        </div>
                    `;
                    document.getElementById('confidence').textContent = '94%';
                    document.getElementById('severity').textContent = 'None';
                    document.getElementById('severity').className = 'severity-value none';
                    document.getElementById('assessmentForm').style.display = 'none';
                } else {
                    document.getElementById('resultBadge').className = 'result-badge malnourished';
                    document.getElementById('resultBadge').textContent = '‚ö†Ô∏è Malnourished';
                    document.getElementById('classification').innerHTML = `
                        <div class="classification-icon">‚ö†Ô∏è</div>
                        <div class="classification-text">
                            <h3>Malnutrition Detected</h3>
                            <p>Please provide child details for detailed assessment</p>
                        </div>
                    `;
                    document.getElementById('confidence').textContent = '91%';
                    document.getElementById('severity').textContent = 'Moderate';
                    document.getElementById('severity').className = 'severity-value moderate';
                    document.getElementById('assessmentForm').style.display = 'block';
                }

                document.getElementById('keyFindings').style.display = 'none';
                document.getElementById('assessmentResults').style.display = 'none';
            }, 2000);
        }

        function performAssessment() {
            const age = document.getElementById('age').value;
            const gender = document.getElementById('gender').value;
            const height = document.getElementById('height').value;
            const weight = document.getElementById('weight').value;

            if (!age || !gender || !height || !weight) {
                alert('Please fill in all fields');
                return;
            }

            const loader = document.getElementById('assessmentLoader');
            loader.style.display = 'inline-block';

            setTimeout(() => {
                loader.style.display = 'none';

                const bmi = (weight / ((height / 100) ** 2)).toFixed(1);
                const types = ['Stunted', 'Wasted', 'Overweight', 'Underweight'];
                const assessmentType = types[Math.floor(Math.random() * types.length)];

                const findings = {
                    'Stunted': ['Chronic malnutrition detected', 'Low height for age', 'Requires long-term nutritional support', 'Monitor growth regularly'],
                    'Wasted': ['Acute malnutrition detected', 'Low weight for height', 'Immediate nutritional intervention needed', 'Protein-energy support essential'],
                    'Overweight': ['Excessive weight detected', 'High BMI for age', 'Lifestyle modification recommended', 'Physical activity encouraged'],
                    'Underweight': ['Low weight for age', 'Caloric intake insufficient', 'Balanced diet required', 'Nutritional counseling suggested']
                };

                document.getElementById('findingsList').innerHTML = findings[assessmentType]
                    .map(f => `<li>${f}</li>`)
                    .join('');
                document.getElementById('keyFindings').style.display = 'block';

                document.getElementById('assessmentGrid').innerHTML = `
                    <div class="assessment-item">
                        <div class="assessment-item-label">Age</div>
                        <div class="assessment-item-value">${age} yrs</div>
                    </div>
                    <div class="assessment-item">
                        <div class="assessment-item-label">BMI</div>
                        <div class="assessment-item-value">${bmi}</div>
                    </div>
                    <div class="assessment-item">
                        <div class="assessment-item-label">Status</div>
                        <div class="assessment-item-value">${assessmentType}</div>
                    </div>
                    <div class="assessment-item">
                        <div class="assessment-item-label">Height/Weight</div>
                        <div class="assessment-item-value">${height}cm/${weight}kg</div>
                    </div>
                `;
                document.getElementById('assessmentResults').style.display = 'block';
            }, 1500);
        }

        function downloadReport() {
            alert('üìÑ Report download functionality would connect to your backend API to generate PDF');
        }

        // Chatbot functions
        function toggleChatbot() {
            const modal = document.getElementById('chatbotModal');
            modal.classList.toggle('active');
            if (modal.classList.contains('active')) {
                initChatbot();
                document.getElementById('chatInput').focus();
            }
        }

        function handleChatKeypress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            const chatMessages = document.getElementById('chatMessages');

            // Add user message
            const userDiv = document.createElement('div');
            userDiv.className = 'message user';
            userDiv.innerHTML = `<div class="message-content">${message}</div>`;
            chatMessages.appendChild(userDiv);

            input.value = '';

            // Get bot response after delay
            setTimeout(() => {
                const response = getBotResponse(message.toLowerCase());
                const botDiv = document.createElement('div');
                botDiv.className = 'message bot';
                botDiv.innerHTML = `<div class="message-content">${response}</div>`;
                chatMessages.appendChild(botDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 500);

            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function getBotResponse(userInput) {
            const responses = {
                // Greeting
                'hi': 'üëã Hello! How can I help you today?',
                'hello': 'üëã Hi there! What would you like to know about malnutrition detection?',
                'hey': 'üëã Hey! Feel free to ask me anything about NutriAnalyze.',

                // How to use
                'how to use': 'üì± Here\'s how to use NutriAnalyze:\n1. Upload a clear image of the child\n2. Our AI analyzes the image\n3. If malnourished, enter age, gender, height, weight\n4. Get detailed assessment and download report!',
                'how does it work': 'ü§ñ Our AI model:\n1. Analyzes facial and body features from images\n2. Detects signs of malnutrition with 94.8% accuracy\n3. Provides assessment for Stunted, Wasted, Overweight, or Underweight',
                'upload': 'üì∏ To upload:\n1. Click "Try It Out" in the sidebar\n2. Review image guidelines\n3. Click upload area or drag & drop\n4. Select clear photo of child',

                // Malnutrition types
                'malnutrition': 'üçΩÔ∏è Malnutrition is lack of proper nutrition. Types:\nüèÉ Stunting: Chronic growth impairment\n‚ö° Wasting: Acute weight loss\n‚öñÔ∏è Underweight: Low weight for age\nüí™ Overweight: Excessive weight',
                'stunting': 'üìè Stunting (chronic):\n‚Ä¢ Low height for age\n‚Ä¢ Long-term nutritional deficiency\n‚Ä¢ Affects growth & development\n‚Ä¢ Requires sustained nutritional support',
                'wasting': '‚ö° Wasting (acute):\n‚Ä¢ Sudden weight loss\n‚Ä¢ Severe malnutrition\n‚Ä¢ Visible muscle loss\n‚Ä¢ Needs immediate intervention',
                'underweight': 'üìâ Underweight:\n‚Ä¢ Low weight for age\n‚Ä¢ Indicates malnutrition\n‚Ä¢ Common in developing regions\n‚Ä¢ Requires balanced diet',
                'overweight': 'üìà Overweight:\n‚Ä¢ Excessive caloric intake\n‚Ä¢ Childhood obesity risk\n‚Ä¢ Requires lifestyle changes\n‚Ä¢ Physical activity important',

                // Symptoms
                'symptoms': '‚ö†Ô∏è Signs of malnutrition:\n‚Ä¢ Weak immunity\n‚Ä¢ Delayed growth\n‚Ä¢ Fatigue & lethargy\n‚Ä¢ Dry skin\n‚Ä¢ Weak bones\n‚Ä¢ Frequent infections',
                'signs': 'üëÅÔ∏è Visual signs:\n‚Ä¢ Pale appearance\n‚Ä¢ Visible weight loss\n‚Ä¢ Muscle wasting\n‚Ä¢ Delayed development\n‚Ä¢ Poor recovery from illness',

                // Accuracy & confidence
                'accuracy': 'üéØ NutriAnalyze is 9% accurate:\n‚úì Trained on 1000+ clinical cases\n‚úì Validated by healthcare professionals\n‚úì Using advanced deep learning\n‚úì Continuously improving',
                'accurate': '‚úÖ Yes! Our AI has 90% accuracy rate in detecting malnutrition from images.',

                // Contact & support
                'support': 'üí¨ Need help?\n‚Ä¢ Use our chatbot (me!)\n‚Ä¢ Check User Manual section\n‚Ä¢ Review image guidelines\n‚Ä¢ Contact our team in About section',
                'contact': 'üìß Reach out:\n‚Ä¢ Check About section for contact info\n‚Ä¢ Use chatbot for quick questions\n‚Ä¢ Email: support@nutrianalyze.com',

                // Mission
                'mission': 'üéØ Our mission:\n‚Ä¢ Early malnutrition detection\n‚Ä¢ Support millions globally\n‚Ä¢ Reach underserved populations\n‚Ä¢ Contribute to Zero Hunger goal',

                // Default response
            };

            for (const [key, value] of Object.entries(responses)) {
                if (userInput.includes(key)) {
                    return value;
                }
            }

            return 'ü§î I\'m not sure about that. Try asking about:\n‚Ä¢ How to use the app\n‚Ä¢ Types of malnutrition\n‚Ä¢ Symptoms & signs\n‚Ä¢ Our mission & accuracy\n‚Ä¢ Image guidelines';
        }

        // Chart initialization
        function initMalnutritionChart() {
            const ctx = document.getElementById('malnutritionChart');
            if (!ctx) return;

            if (currentChart) {
                currentChart.destroy();
            }

            currentChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Micronutrient Deficiency', 'Stunting (Chronic)', 'Underweight', 'Wasting (Acute)'],
                    datasets: [{
                        data: [65, 18, 12, 5],
                        backgroundColor: [
                            '#27ae60',
                            '#ff6b35',
                            '#3498db',
                            '#e74c3c'
                        ],
                        borderColor: '#ffffff',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: { size: 12, weight: 'bold' },
                                padding: 16
                            }
                        }
                    }
                }
            });
        }

        // Initialize on page load
        window.addEventListener('load', initChatbot);
    </script>
</body>
</html>
